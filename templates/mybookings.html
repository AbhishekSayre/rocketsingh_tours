{% extends "base.html" %}
{% load static %}

{% block title %}My Bookings | Rocket Singh{% endblock %}
{% block content %} 
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding-top: 80px;
      background: linear-gradient(to right, #0d6b4d, #0a5169); /* Green-Blue UI */
      color: #333;
    }

    /* Navbar */
    .navbar {
      background: white;
      padding: 15px 30px;
      display: flex;
      justify-content: space-between; 
      align-items: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .navbar a {
      text-decoration: none;
      color: #0a5169;
      margin-left: 20px;
      font-weight: bold;
    }
    .navbar a:hover {
      color: #0d6b4d;
    }

    /* Container */
    .container {
      background: #fff;
      margin: 40px auto;
      padding: 30px;
      border-radius: 12px;
      max-width: 900px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    h1 {
      margin-bottom: 20px;
      color: #0d6b4d;
    }

    .section-title {
      font-size: 20px;
      margin-top: 30px;
      margin-bottom: 15px;
      color: #0a5169;
      font-weight: bold;
    }

    /* Booking Card */
    .booking-card {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      padding: 15px;
      border-radius: 10px;
      background: #f8f9fa;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .booking-info {
      flex: 1;
    }
    .booking-info h3 {
      margin: 5px 0;
      color: #333;
    }
    .booking-info p {
      margin: 3px 0;
      color: #555;
      font-size: 14px;
    }
    .booking-actions {
      margin-top: 10px;
    }
    .booking-actions button {
      padding: 8px 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      margin-right: 10px;
    }
    .btn-primary {
      background-color: #0d6b4d;
      color: white;
    }
    .btn-primary:hover {
      background-color: #0b5a3d;
    }
    .btn-secondary {
      background-color: #e0e0e0;
      color: #333;
    }
    .btn-secondary:hover {
      background-color: #c7c7c7;
    }

    .booking-image img {
      width: 160px;
      height: 100px;
      border-radius: 8px;
      object-fit: cover;
    }
  </style>
</head>
<body>


  <!-- Content -->
  <div class="container">
    <h1>My Bookings</h1>

    <!-- Upcoming Bookings -->
    <div class="section-title">Upcoming Bookings</div>
    {% if upcoming_bookings %}
  {% for booking in upcoming_bookings %}
    <div class="booking-card">
      <div class="booking-info">
        <span style="color:#0d6b4d; font-weight:bold;">Upcoming</span>
        <h3>{{ booking.tour.name }}</h3>
        <p>üìç {{ booking.tour.destination }}</p>
        <p>üìÖ {{ booking.tour_date }}</p>
        <p>üë• Travelers: {{ booking.num_travelers }}</p>
        <p>üí∞ Amount: ‚Çπ{{ booking.total_amount }}</p>

        <div class="booking-actions">
          <a href="{% url 'download_booking_pdf' booking.id %}">
            <button class="btn-primary">View Details</button>
          </a>


          <a href="{% url 'cancel_booking' booking.id %}">
            <button class="btn-secondary">Cancel Booking</button>
          </a>
        </div>
      </div>
      <div class="booking-image">
        <img src="{{ booking.tour.image.url }}" alt="{{ booking.tour.name }}">
      </div>
    </div>
  {% endfor %}
{% else %}
  <p style="color:#888;">No upcoming bookings found.</p>
{% endif %}

    <!-- Past Bookings -->
    <div class="section-title">Past Bookings</div>
    {% if past_bookings %}
      {% for booking in past_bookings %}
      <div class="booking-card">
        <div class="booking-info">
          <span style="color:#888;">Completed</span>
          <h3>{{ booking.tour.name }}</h3>
          <p>üìç {{ booking.tour.destination }}</p>
          <p>üìÖ {{ booking.tour_date.date }}</p>
          <p>üë• Travelers: {{ booking.num_travelers }}</p>
          <p>üí∞ Amount: ‚Çπ{{ booking.total_amount }}</p>
          <div class="booking-actions">
            <a href="{% url 'booknow' booking.tour.id %}">
              <button class="btn-primary">Book Again</button>
            </a>
          </div>
        </div>
        <div class="booking-image">
          <img src="{{ booking.tour.image.url }}" alt="{{ booking.tour.name }}">
        </div>
      </div>
      {% endfor %}
    {% else %}
      <p style="color:#888;">No past bookings found.</p>
    {% endif %}

    <!-- Cancelled Bookings -->
    <div class="section-title">Cancelled Bookings</div>
    {% if cancelled_bookings %}
      {% for booking in cancelled_bookings %}
      <div class="booking-card" style="opacity:0.6;">
        <div class="booking-info">
          <span style="color:red; font-weight:bold;">Cancelled</span>
          <h3>{{ booking.tour.name }}</h3>
          <p>üìç {{ booking.tour.destination }}</p>
          <p>üìÖ {{ booking.tour_date }}</p>
          <p>üë• Travelers: {{ booking.num_travelers }}</p>
          <p>üí∞ Amount: ‚Çπ{{ booking.total_amount }}</p>
          <div class="booking-actions">
            <a href="{% url 'booknow' booking.tour.id %}">
              <button class="btn-primary">Book Again</button>
            </a>

          </div>
        </div>
        <div class="booking-image">
          <img src="{{ booking.tour.image.url }}" alt="{{ booking.tour.name }}">
        </div>
      </div>
      {% endfor %}
    {% else %}
      <p style="color:#888;">No cancelled bookings.</p>
    {% endif %}


  
  </div>


{% endblock content %}