{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
  body {
    background-color: #043d3b;
    font-family: 'Segoe UI', sans-serif;
    color: #fff;
    padding-top: 80px;
  }
      /* Navbar */
  .navbar{
      background: white;
      padding: 15px 30px;
      display: flex;
      justify-content: space-between; 
      align-items: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
  }
  
  .navbar a {
      text-decoration: none;
      color: #0a5169;
      margin-left: 20px;
      font-weight: bold;
  }

  .navbar a:hover {
      color: #0d6b4d;
  }


  .container {
    display: flex;
    padding: 60px 40px 40px 40px;
    gap: 50px;
  }

  .sidebar {
    width: 250px;
  }

  .sidebar h3 {
    color: #ffc107;
    margin-bottom: 15px;
  }

  .sidebar ul {
    list-style: none;
    padding: 0;
  }

  .sidebar li {
    margin: 10px 0;
    padding: 8px;
    cursor: pointer;
    border-radius: 6px;
  }

  .sidebar li:hover {
    background-color: #004744;
  }

  .profile-section {
    flex-grow: 1;
  }

  .profile-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .profile-header h2 {
    margin: 0;
  }

  .divider {
    height: 1px;
    background-color: #ffc107;
    margin: 20px 0;
  }

  .profile-photo {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid #ffc107;
    cursor: pointer;
  }

  .user-info-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 15px 0;
  }

  .user-info-label {
    width: 150px;
    font-weight: bold;
  }

  input,
  select {
    background-color: #00332f;
    border: none;
    padding: 8px 12px;
    border-radius: 8px;
    color: white;
    width: 70%;
  }

  .save-btn {
    background-color: #ffc107;
    color: #00332f;
    padding: 10px 20px;
    border: none;
    border-radius: 10px;
    font-weight: bold;
    margin-top: 20px;
    cursor: pointer;
  }

  .alert {
    background-color: #2d6a4f;
    color: #fff;
    padding: 10px;
    margin-bottom: 15px;
    border-radius: 8px;
  }
</style>

<div class="container">
  <div class="sidebar">
    <h3>User Settings</h3>
    <ul>
      <li>ðŸ‘¤ Manage Personal</li>
      <li>ðŸ’³ Payment Details</li>
      <li> <a href="{% url 'mybookings' %}"style="color:inherit; text-decoration:none;">My Bookings</a></li>
      <li>ðŸ›¡ Security</li>
      <li>âš™ Settings</li>
      <li>ðŸ”’ <a href="{% url 'change_password' %}"style="color:inherit; text-decoration:none;">Change Password</a></li>
      <li><a href="{% url 'logout' %}" style="color:inherit; text-decoration:none;">ðŸ”Œ Logout</a></li>
    </ul>
  </div>

  <div class="profile-section">
    <div class="profile-header">
      <h2>Edit Personal Info</h2>
      <img src="{{ user.profile_photo.url }}" class="profile-photo" id="profile-photo-preview" onclick="document.getElementById('id_profile_photo').click()">
    </div>
    <p>Update your details below</p>
    <div class="divider"></div>

    {% if messages %}
      {% for message in messages %}
        <div class="alert">{{ message }}</div>
      {% endfor %}
    {% endif %}

    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <div class="user-info-row">
        <div class="user-info-label">Full Name</div>
        {{ form.name }}
      </div>

      <div class="user-info-row">
        <div class="user-info-label">Email</div>
        {{ form.email }}
      </div>

      <div class="user-info-row">
        <div class="user-info-label">Phone</div>
        {{ form.phone }}
      </div>

      <div class="user-info-row">
        <div class="user-info-label">Date of Birth</div>
        {{ form.dob }}
      </div>

      <div class="user-info-row">
        <div class="user-info-label">Gender</div>
        {{ form.gender }}
      </div>

      {{ form.profile_photo }}

      <button class="save-btn" type="submit">Save Changes</button>
    </form>
  </div>
</div>

<script>
  document.getElementById('id_profile_photo').style.display = 'none';

  document.getElementById('id_profile_photo').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        document.getElementById('profile-photo-preview').src = e.target.result;
      }
      reader.readAsDataURL(file);
    }
  });
</script>
{% endblock %}
